---
author: 'Marcus Vinicius Richa'
title: 'RabbitMQ - Overview'
date: '2022-03-17'
subject: 'development-articles'
description: 'ReabbitMQ is a software that defines queues to which applications can connect in order to transfer messages. And that these messages could just be just a simple text message, or it could could be something more elaborated like some kind of metadata information to be use as resource in other applications, etc. And it uses the Advanced Message Queuing Protocol (AMQP).'
---

# RabbitMQ - Overview

1. ##### Introduction
2. ##### A Case Use Example
3. ##### Advantages in the Use of Queues
4. ##### Basic Architecture
    4.1. Types of Exchanges   
    4.2. RabbitMQ and Server Concepts   
5. ##### Installing the RabbitMQ Server on Debian/Ubuntu
    5.1.  
    5.2.  
    5.3. 
6. ##### 
7. ##### 
8. ##### 
9. #####
10. ##### Further Reading
11. ##### References

### Introduction
 
According to the [Cloudamqp](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html) platform, RabbitMQ is a message-queueing software, which also may be called **message broker** or **queue menager**.
 
And in slimply terms, the CloudAMQP states that ReabbitMQ is a software that defines queues to which applications can connect in order to transfer messages. And that these messages could just be just a simple text message, or it could could be something more elaborated like some kind of metadata information to be use as resource in other applications, etc.

The RabbitMQ software uses the Advanced Message Queuing Protocol (AMQP), and you can read more about that in this `article` [¹]

### A Case Use Example 
 
From this use case presented at the CloudAMQP platform, one important point about the use of queues in applications can be seem from the flow of some asynchronous process, like a process where some application has to handle some information received, generate a document like a PDF, and then send a email, all these activities that may take several seconds, and this is why queues may be so effective.


`At the beginning of this article series, we had one producer (the website application) and one consumer (the PDF processing application). If the PDF processing application crashes, or if many PDF requests are coming at the same time, messages would continue to stack up in the queue until the consumer starts again. It would then process all the messages, one by one`. [Cloudamqp](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)


![example-of-rabbitmq-queue-01](/images/articles/development/example-of-rabbitmq-queue-01.png)
 
 
### Advantages in the Use of Queues

- **Performance**: the use of a specialized component to handle special process on the fly for some application, instead of abruptaly creating short lived process to handle this specific tasks of messaging.
- **Layer Abstraction**: the use of a component to create an abstraction in the architecture of the application helps to insert interoperability to the system while reduces the coupling of the applications.


### Basic Architecture

The basic architecture of the RabbitMQ software divides the **broker** into two smaller components:

1. **Exchange**: this is the place/stage where the messages are published. From here the exchange becomes responsible to route the message to the correct queues.    
    1.1. While the Exchange handles this control, it uses routing keys and some properties to the messages to create bindings with the correct queues.
2. **Queues**: a buffer that stores the messages, and have to be bound to at least one exchange to receive the messages.


#### Types of Exchanges

1. **Direct**: the message is routed to the queues whose binding key exactly matches the routing key of the message. For example, if the queue is bound to the exchange with the binding key `pdfprocess`, a message published to the exchange with a routing key `pdfprocess`is routed to that queue.
2. **Fanout**: this type of exchange routes messages to all of the queues bound to it.
3. **Topic**: this topic exchange does a wildcard match between the routing key an the rounting pattern specified in the binding.
4. **Headers**: the headers type of exchange use the message header attributes for routing.


![example-of-rabbitmq-queue-02](/images/articles/development/example-of-rabbitmq-queue-02.png)


#### RabbitMQ and Server Concepts
- **Producer**
- **Consumer**
- **Queue**: a buffer that stores the messages, and have to be bound to at least one exchange to receive the messages.
- **Message**
- **Connection**: which uses a TCP connection between the applications and the broker.
- **Channel**: this are virtual connections inside a connecting, and all the publishing and consuming operations are done over a channel.
- **Exchange**: it receives the messages from producers and pushes them to queues they are binded depending on th rules defined by the exchange type.
- **Binding**: the link existent between the queue and the exchange.
- **Routing key**: this key is some metadata the exchanges looks at to decide how to route the message. It works like an address for the message.
- **AMQP**: this is the Advanced Message Queueing Protocol used by RabbitMQ for messaging.
- **Users**: it is possible to connect to RabbitMQ with a given username an password. EVery user can be assigned permissions such as rights to read, write and configure privileges within the instance. Users can also be assigned permissions for specific virtual hosts.
- **Virtual Host (Vhost)**: provides a way to segragete applications using the same RabbitMQ instance. Different users can have different permissions to different vhost ans queues and exchanges can be created, so they only exist in one vhost.


### Installing the RabbitMQ Server on Debian/Ubuntu

There are two options available for Debian and Ubutun users:

1. **Apt** framework on the repositiories from Cloudsmith.
2. **Apt** framework on a combination of repositories on PackageCloud.


`Both options will install a modern version of Erlang using Erlang apt repositories on Cloudsmith or Launchpad.` [RabbitMQ](https://www.rabbitmq.com/install-debian.html)


First, the RabbitMQ server requires **Erlang** as a dependency:

Erlang is a functional, general-purpose, concurrent programming language and garbage-collected runtime environment supported and maintained by Ericsson OTP. [Computing for Geeks](https://computingforgeeks.com/how-to-install-latest-erlang-on-ubuntu-linux/)


###### First step: import Erlang GPG Key

Run the following commands to import Erlang repository GPG key:

```
sudo apt update
sudo apt install software-properties-common apt-transport-https
wget -O- https://packages.erlang-solutions.com/ubuntu/erlang_solutions.asc | sudo apt-key add -
``` 


###### Second step: Add Erlang Repository to Ubuntu

Once the key have been imported, add the repository to the Ubuntu 22.04|20.04|18.04 system:

```
echo "deb https://packages.erlang-solutions.com/ubuntu focal contrib" | sudo tee /etc/apt/sources.list.d/erlang.list
```


###### Third step: Install Erlang on Ubuntu

The last step is the installation itself of th Erlang in the Ubuntu system. First, update the system package list and then install it:

```
sudo apt update
sudo apt install erlang
```


###### Installing RabbitMQ server

For the most recent RabbitMQ releases its necessary to use the PackageCloud repository. So, first download and import the GPG key:

```
sudo apt update && sudo apt install curl wget gpg gnupg2
wget https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey -O rabbitmq.gpgkey
cat rabbitmq.gpgkey|sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/rabbitmq-keyring.gpg
``` 

Then, adding the RabbitMQ repository:

```
echo "deb https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ focal main" | sudo tee /etc/apt/sources.list.d/rabbitmq-server.list
``` 

Now, using the script bellow to configure the RabbitMQ repositories:

```
curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.deb.sh | sudo bash
```

Updating the system before installing the RabbitMQ Server on Ubuntu:

```
sudo apt update
``` 

Finally, installing the rabbitmq-server package:

```
sudo apt install rabbitmq-server
```

And configuring the RabbitMQ service, here it's possible to check its status:

```
systemctl status rabbitmq-server.service
```

Now, enabling it if it is necessary:

```
sudo systemctl enable rabbitmq-server
``` 



 
 

### Further Reading

[AMQP 0-9-1 Model Explained - RabbitMQ](https://www.rabbitmq.com/tutorials/amqp-concepts.html) 

[AMQP - amqp.org]( https://www.amqp.org/)

[ISO and IEC Approve OASIS AMQP Advanced Message Queuing Protocol](https://www.oasis-open.org/news/pr/iso-and-iec-approve-oasis-amqp-advanced-message-queuing-protocol/)
 
[Part 1: RabbitMQ for beginners - What is RabbitMQ? - CloudAMQP](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)

[Part 2: RabbitMQ for beginners - Sample code - CloudAMQP](https://www.cloudamqp.com/blog/part2-rabbitmq-for-beginners_example-and-sample-code.html)

[Part 3: The RabbitMQ Management Interface - CloudAMQP](https://www.cloudamqp.com/blog/part3-rabbitmq-for-beginners_the-management-interface.html)

[Part 4: RabbitMQ Exchanges, routing keys and bindings - CloudAMQP](https://www.cloudamqp.com/blog/part4-rabbitmq-for-beginners-exchanges-routing-keys-bindings.html)
 
[RabbitMQ Tutorials - RabbitMQ](https://www.rabbitmq.com/getstarted.html)

[The best online training tool for RabbitMQ - BETA](https://training.cloudamqp.com/)
 
[Docs - CloudAMQP](https://www.cloudamqp.com/docs/index.html)
 
[RabbitMQ: o que é e como utilizar - Cedro Blog](https://blog.cedrotech.com/rabbitmq-o-que-e-e-como-utilizar)
 
[Installing on Debian and Ubuntu - RabbitMQ](https://www.rabbitmq.com/install-debian.html)

[Install RabbitMQ Server on Ubuntu 22.04|20.04|18.04](https://computingforgeeks.com/how-to-install-latest-rabbitmq-server-on-ubuntu-linux/)

### References

[Part 1: RabbitMQ for beginners - What is RabbitMQ? - CloudAMQP](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)

[RabbitMQ Tutorials - RabbitMQ](https://www.rabbitmq.com/getstarted.html)


[¹]:advanced-message-queuing-protocol-2022-03-16

